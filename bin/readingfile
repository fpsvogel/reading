#!/usr/bin/env ruby

# A script that provides a quick way to see the output of a CSV file.
#
# Usage:
# Run on the command line:
#   reading "<file path>" "<optional comma-separated names of enabled columns>"
#
# Examples:
#   reading '/home/alex/reading.csv'
#   reading '/home/alex/reading.csv' 'head, sources'


require_relative "../lib/reading"
require "amazing_print"
require "debug"

path = ARGV[0]
unless path
  raise ArgumentError, "CSV path argument required, such as '/home/alex/reading.csv'"
end

config = {}
if ARGV[1]
  enabled_columns = ARGV[1].split(",").map(&:strip).map(&:to_sym)
  config = { enabled_columns: }
end

items = Reading.parse(path, config:, hash_output: true)

ap items
